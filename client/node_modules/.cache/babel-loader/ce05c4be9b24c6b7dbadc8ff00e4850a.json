{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst isBrowser = typeof window !== 'undefined';\n\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  }\n\n  for (let i = 0; i < document.styleSheets.length; i += 1) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  }\n\n  return;\n}\n\nfunction makeStyleTag() {\n  const tag = document.createElement('style');\n  tag.type = 'text/css';\n  tag.setAttribute('data-ui-box', '');\n  tag.append(document.createTextNode(''));\n  (document.head || document.querySelector('head')).append(tag);\n  return tag;\n}\n\nclass CustomStyleSheet {\n  constructor(options = {}) {\n    this.tags = [];\n    this.ctr = 0;\n    this.injected = false;\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.maxLength = options.maxLength || 65000;\n  }\n\n  getSheet() {\n    return sheetForTag(last(this.tags));\n  }\n\n  inject() {\n    if (this.injected) {\n      throw new Error('StyleSheet has already been injected.');\n    }\n\n    if (isBrowser) {\n      this.tags[0] = makeStyleTag();\n    } else {\n      this.sheet = {\n        cssRules: [],\n        insertRule: rule => {\n          this.sheet.cssRules.push({\n            cssText: rule\n          });\n        }\n      };\n    }\n\n    this.injected = true;\n  }\n\n  speedy(bool) {\n    if (this.ctr !== 0) {\n      throw new Error(`StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})`);\n    }\n\n    this.isSpeedy = Boolean(bool);\n  }\n\n  _insert(sheet, rule) {\n    sheet.insertRule(rule, sheet.cssRules.length);\n  }\n\n  insert(rule) {\n    if (isBrowser) {\n      const sheet = this.getSheet();\n\n      if (this.isSpeedy && sheet && sheet.insertRule) {\n        this._insert(sheet, rule);\n      } else {\n        last(this.tags).append(document.createTextNode(rule));\n      }\n    } else if (this.sheet) {\n      this.sheet.insertRule(rule, this.sheet.cssRules.length);\n    }\n\n    this.ctr += 1;\n\n    if (isBrowser && this.ctr % this.maxLength === 0) {\n      this.tags.push(makeStyleTag());\n    }\n\n    return this.ctr - 1;\n  }\n\n  flush() {\n    if (isBrowser) {\n      this.tags.forEach(tag => tag.parentNode.removeChild(tag));\n      this.tags = [];\n      this.sheet = null;\n      this.ctr = 0;\n    } else if (this.sheet) {\n      this.sheet.cssRules = [];\n    }\n\n    this.injected = false;\n  }\n\n  rules() {\n    if (!isBrowser) {\n      return this.sheet ? this.sheet.cssRules : [];\n    }\n\n    const arr = [];\n    this.tags.forEach(tag => {\n      const sheet = sheetForTag(tag);\n\n      if (sheet) {\n        const rules = Array.from(sheet.cssRules);\n        arr.splice(arr.length, 0, ...[...rules]);\n      }\n    });\n    return arr;\n  }\n\n}\n\nexports.default = CustomStyleSheet;","map":{"version":3,"sources":["../../../src/utils/style-sheet.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isBrowser = typeof window !== 'undefined';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nfunction sheetForTag(tag) {\n    if (tag.sheet) {\n        return tag.sheet;\n    }\n    for (let i = 0; i < document.styleSheets.length; i += 1) {\n        if (document.styleSheets[i].ownerNode === tag) {\n            return document.styleSheets[i];\n        }\n    }\n    return;\n}\nfunction makeStyleTag() {\n    const tag = document.createElement('style');\n    tag.type = 'text/css';\n    tag.setAttribute('data-ui-box', '');\n    tag.append(document.createTextNode(''));\n    (document.head || document.querySelector('head')).append(tag);\n    return tag;\n}\nclass CustomStyleSheet {\n    constructor(options = {}) {\n        this.tags = [];\n        this.ctr = 0;\n        this.injected = false;\n        this.isSpeedy = options.speedy === undefined\n            ? process.env.NODE_ENV === 'production'\n            : options.speedy;\n        this.maxLength = options.maxLength || 65000;\n    }\n    getSheet() {\n        return sheetForTag(last(this.tags));\n    }\n    inject() {\n        if (this.injected) {\n            throw new Error('StyleSheet has already been injected.');\n        }\n        if (isBrowser) {\n            this.tags[0] = makeStyleTag();\n        }\n        else {\n            this.sheet = {\n                cssRules: [],\n                insertRule: (rule) => {\n                    this.sheet.cssRules.push({ cssText: rule });\n                }\n            };\n        }\n        this.injected = true;\n    }\n    speedy(bool) {\n        if (this.ctr !== 0) {\n            throw new Error(`StyleSheet cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})`);\n        }\n        this.isSpeedy = Boolean(bool);\n    }\n    _insert(sheet, rule) {\n        sheet.insertRule(rule, sheet.cssRules.length);\n    }\n    insert(rule) {\n        if (isBrowser) {\n            const sheet = this.getSheet();\n            if (this.isSpeedy && sheet && sheet.insertRule) {\n                this._insert(sheet, rule);\n            }\n            else {\n                last(this.tags).append(document.createTextNode(rule));\n            }\n        }\n        else if (this.sheet) {\n            this.sheet.insertRule(rule, this.sheet.cssRules.length);\n        }\n        this.ctr += 1;\n        if (isBrowser && this.ctr % this.maxLength === 0) {\n            this.tags.push(makeStyleTag());\n        }\n        return this.ctr - 1;\n    }\n    flush() {\n        if (isBrowser) {\n            this.tags.forEach(tag => tag.parentNode.removeChild(tag));\n            this.tags = [];\n            this.sheet = null;\n            this.ctr = 0;\n        }\n        else if (this.sheet) {\n            this.sheet.cssRules = [];\n        }\n        this.injected = false;\n    }\n    rules() {\n        if (!isBrowser) {\n            return (this.sheet ? this.sheet.cssRules : []);\n        }\n        const arr = [];\n        this.tags.forEach(tag => {\n            const sheet = sheetForTag(tag);\n            if (sheet) {\n                const rules = Array.from(sheet.cssRules);\n                arr.splice(arr.length, 0, ...[...rules]);\n            }\n        });\n        return arr;\n    }\n}\nexports.default = CustomStyleSheet;\n//# sourceMappingURL=style-sheet.js.map"]},"metadata":{},"sourceType":"script"}